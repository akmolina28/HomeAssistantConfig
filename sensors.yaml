- platform: history_stats
  name: air_filter_history_24
  entity_id: switch.ikea_outlet_2
  state: 'on'
  type: time
  end: '{{ now() }}'
  duration: '24:00:00'

- platform: time_date
  display_options:
  - 'time'
  - 'date'
  - 'date_time'
  - 'date_time_iso'
  - 'time_date'
  - 'time_utc'
  - 'beat'
  
- platform: template
  sensors:
    thermostat_weather_temp:
      friendly_name: 'Thermostat Outdoor Temp'
      unit_of_measurement: 'Â°F'
      value_template: "{{ state_attr('weather.thermostat', 'temperature') }}"
    front_door_open_close:
      friendly_name: 'Front Door Open/Close'
      value_template: >
        {% if is_state('binary_sensor.openclose_2', 'on') %}
          Open
        {% else %}
          Closed
        {% endif %}
      icon_template: >
        {% if is_state('binary_sensor.openclose_2', 'on') %}
          mdi:door-open
        {% else %}
          mdi:door
        {% endif %}
    garage_open_close:
      friendly_name: 'Garage Open/Close'
      value_template: >
        {% if is_state('binary_sensor.openclose_12', 'on') %}
          Open
        {% else %}
          Closed
        {% endif %}
      icon_template: >
        {% if is_state('binary_sensor.openclose_12', 'on') %}
          mdi:garage-open
        {% else %}
          mdi:garage
        {% endif %}
    man_cave_door_open_close:
      friendly_name: 'Man Cave Door Open/Close'
      value_template: >
        {% if is_state('binary_sensor.openclose_15', 'on') %}
          Open
        {% else %}
          Closed
        {% endif %}
      icon_template: >
        {% if is_state('binary_sensor.openclose_15', 'on') %}
          mdi:door-open
        {% else %}
          mdi:door
        {% endif %}
    
    air_filter_status_green:
      friendly_name: Air Filter - Green
      value_template: '{{ (states.sensor.air_filter_history_24.state | float) > 8 }}'
        
    air_filter_status_yellow:
      friendly_name: Air Filter - Green
      value_template: '{{ (states.sensor.air_filter_history_24.state | float) > 0 and (states.sensor.air_filter_history_24.state | float) <= 4 }}'
    
    air_filter_status_red:
      friendly_name: Air Filter - Red
      value_template: '{{ (states.sensor.air_filter_history_24.state | float) <= 0 }}'

    thermostat_away_mode:
      friendly_name: Thermostat Away Mode
      value_template: '{{ states.climate.thermostat.attributes.away_mode }}'

    temperature_6_calibrated:
      friendly_name: 'Laundry Room Temperature'
      value_template: '{{ states.sensor.temperature_6.state | float + 2.5 }}'
      unit_of_measurement: 'degrees'

    anybody_home:
      friendly_name: 'Anybody Home'
      value_template: '{{ states("person.andrew") == "home" or  states("person.kaitlyn") == "home" }}'