lights_bright_up:
  alias: Lights Brightness Up
  sequence:
  - service: light.turn_on
    data_template:
      entity_id: "{{ entity_id }}"
      brightness: >
        {% set n = (state_attr(entity_id, "brightness") | int) + 50 %}
        {% if n > 254 %}
          254
        {% else %}
          {{ n }}
        {% endif %}

lights_bright_down:
  alias: Lights Brightness Down
  sequence:
  - service: light.turn_on
    data_template:
      entity_id: "{{ entity_id }}"
      brightness: >
        {% set n = state_attr(entity_id, 'brightness') | int - 50 %}
        {% if n < 4 %}
          4
        {% else %}
          {{ n }}
        {% endif %}

all_lights_off:
  alias: All Lights Off
  sequence:
  - service: light.turn_off
    data:
      entity_id: group.all_lights
  - service: switch.turn_off
    data:
      entity_id: switch.power_outlet_1
  - service: switch.turn_off
    data:
      entity_id: switch.power_outlet_2
  - service: switch.turn_off
    data:
      entity_id: switch.ikea_outlet_1 #patio-lights

turn_off_interior_lights:
  alias: Turn Off Interior Lights
  sequence:
  - service: light.turn_off
    data:
      entity_id: light.interior_lights
  - service: switch.turn_off
    data:
      entity_id:
      - group.interior_light_switches

turn_on_air_purifier:
  alias: Turn On Air Purifier
  sequence:
  - service: switch.turn_on
    data:
      entity_id: switch.ikea_outlet_2
      
turn_off_air_purifier:
  alias: Turn Off Air Purifier
  sequence:
  - service: switch.turn_off
    data:
      entity_id: switch.ikea_outlet_2

turn_on_patio_lights:
  alias: Turn On Patio Lights
  sequence:
  - service: switch.turn_on
    data:
      entity_id: switch.ikea_outlet_2

turn_off_patio_lights:
  alias: Turn Off Patio Lights
  sequence:
  - service: switch.turn_off
    data:
      entity_id: switch.ikea_outlet_2

set_climate_away_mode:
  alias: Set Climate Away Mode
  sequence:
  - service: climate.set_preset_mode
    data:
      entity_id: climate.thermostat
      preset_mode: away

resume_climate_schedule:
  alias: Resume Climate Schedule
  sequence:
  - service: climate.ecobee_resume_program
    data:
      entity_id: climate.thermostat
      resume_all: true

turn_off_media_players:
  alias: Turn Off Media Players
  sequence:
  - service: media_player.turn_off
    entity_id:
    - media_player.living_room_tv_2
    - media_player.living_room_receiver

set_automation_mode_away:
  alias: Away Mode
  sequence:
  - service: input_select.select_option
    data:
      entity_id: input_select.automation_mode
      option: away
  - service: script.turn_off_interior_lights
  - service: script.turn_on_air_purifier
  - service: script.set_climate_away_mode
  - service: script.turn_off_media_players

set_automation_mode_home:
  alias: Home Mode
  sequence:
  - service: input_select.select_option
    data:
      entity_id: input_select.automation_mode
      option: home
  - service: switch.turn_on
    data:
      entity_id: group.kitchen_cabinet_lights
  - service: script.turn_off_air_purifier
  - service: script.resume_climate_schedule
  - condition: or
    conditions:
    - condition: state
      entity_id: sun.sun
      state: below_horizon
    - condition: numeric_state
      entity_id: sensor.lightlevel_21
      below: '100'
  - service: light.turn_on
    data:
      entity_id: light.living_room_lights
      brightness: '255'
  - service: script.turn_on_patio_lights

set_automation_mode_sleep:
  alias: Sleep Mode
  sequence:
  - service: input_select.select_option
    data:
      entity_id: input_select.automation_mode
      option: sleep
  - service: script.turn_on_air_purifier
  - service: script.turn_off_interior_lights

home_arrival:
  alias: Home Arrival
  sequence:
  - service: light.turn_on
    data:
      entity_id: light.laundry_room_lights
      brightness: '255'
  - service: climate.set_away_mode
    data:
      entity_id: climate.thermostat
      away_mode: off
  - service: switch.turn_off
    data:
      entity_id: switch.ikea_outlet_2
  - service: switch.turn_on
    data:
      entity_id:
      - switch.power_outlet_1
      - switch.power_outlet_2

goodnight:
  alias: Goodnight
  sequence:
  # Turn off light bulbs
  - service: light.turn_off
    data:
      entity_id:
      - light.laundry_room_lights
      - light.living_room_lights
      - light.man_cave_lights
      - light.master_bedroom_lights
      - light.guest_room_lights
  # Turn off light switches
  - service: switch.turn_off
    data:
      entity_id:
      - switch.ikea_outlet_1
      - switch.power_outlet_1
      - switch.power_outlet_2
  # Turn on air filter
  - service: switch.turn_on
    data:
      entity_id:
      - switch.ikea_outlet_2
  - service: media_player.turn_off
    entity_id:
    - media_player.living_room_tv_2
    - media_player.living_room_receiver
  
good_morning:
  alias: Good Morning
  sequence:
  - service: light.turn_on
    data:
      entity_id:
      - light.couch_lamp
  - service: switch.turn_on
    data:
      entity_id:
      - switch.power_outlet_1
      - switch.power_outlet_2
  - service: switch.turn_off
    data:
      entity_id:
      - switch.ikea_outlet_2

fast_enable_flux_living_room:
  alias: Fast Enable Living Room Flux
  sequence:
  - service: switch.turn_on
    data:
      entity_id: switch.living_room_fluxer_fast
  - delay:
      seconds: 2
  - service: switch.turn_off
    data:
      entity_id: switch.living_room_fluxer_fast
  - service: switch.turn_on
    data:
      entity_id: switch.living_room_fluxer

hass_restart:
  alias: Restart Home Assistant
  sequence:
  - service: homeassistant.restart

living_room_on:
  alias: Living Room On
  sequence:
  - service: light.turn_on
    data:
      entity_id: light.living_room_lights
  - service: media_player.turn_on
    data:
      entity_id:
      - media_player.living_room_tv_2
      - media_player.living_room_receiver

work_mode:
  alias: Work Mode
  sequence:
  - service: light.turn_off
    entity_id:
    - light.master_bedroom_lights
    - light.living_room_lights
    - light.guest_room_lights
    - light.laundry_room_lights
    - light.driveway_lights
  - service: switch.turn_off
    entity_id:
    - switch.power_outlet_1
    - switch.power_outlet_2
    - switch.ikea_outlet_1

foobar:
  sequence:
  - service: automation.trigger
    entity_id:
    - automation.isuck_large_clean_complete
    - automation.isuck_medium_clean_complete